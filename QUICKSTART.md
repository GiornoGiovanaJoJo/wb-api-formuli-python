# üöÄ QUICKSTART - –ú—É–ª—å—Ç–∏—Ä–µ–ø–æ—Ä—Ç–µ—Ä WB API

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)

```bash
git clone https://github.com/GiornoGiovanaJoJo/wb-api-formuli-python.git
cd wb-api-formuli-python
python -m venv venv
source venv/bin/activate  # –∏–ª–∏ venv\Scripts\activate –Ω–∞ Windows
pip install -r requirements.txt
cp .env.example .env
```

## üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à –∫–ª—é—á:

```env
WB_API_KEY=eyJhbGciOiJFUzI1NiIsImtpZCI6IjIwMjUwOTA0djEi...
```

üí° **–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á:**
1. [seller.wildberries.ru](https://seller.wildberries.ru) ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API –∫–ª—é—á–∏
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á
3. –í—ã–±—Ä–∞—Ç—å: ‚òëÔ∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, ‚òëÔ∏è –§–∏–Ω–∞–Ω—Å—ã, ‚òëÔ∏è –î–æ—Å—Ç–∞–≤–∫–∏, ‚òëÔ∏è –°–∫–ª–∞–¥—ã

---

## üß™ –ë–´–°–¢–†–´–ô –¢–ï–°–¢ (–û–î–ù–ê –ö–û–ú–ê–ù–î–ê)

```bash
python test_multi_reports.py
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç 5 –æ—Ç—á—ë—Ç–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (2-3 —Å–µ–∫—É–Ω–¥—ã)
- üìä –ü–æ–∫–∞–∂–µ—Ç —Å–≤–æ–¥–∫—É –ø–æ –∫–∞–∂–¥–æ–º—É –æ—Ç—á—ë—Ç—É
- üìÅ –°–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å—ë –≤ `output/wb_test_reports_*.json`

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
üß™ WB API MULTI-REPORT LOADER - –ë–´–°–¢–†–´–ô –¢–ï–°–¢
============================================================
‚úÖ API –∫–ª—é—á –Ω–∞–π–¥–µ–Ω: eyJhbGciOiJFUzI1NiI...
üìÖ –ü–µ—Ä–∏–æ–¥: 2025-11-11T00:00:00Z ‚Üí 2025-11-18T23:59:59Z

üìã –ó–∞–≥—Ä—É–∂–∞–µ–º 5 –æ—Ç—á—ë—Ç–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ...
‚è±Ô∏è  –û–∂–∏–¥–∞–π—Ç–µ 2-5 —Å–µ–∫—É–Ω–¥...

============================================================
üìä –°–í–û–î–ö–ê –ó–ê–ì–†–£–ó–ö–ò –û–¢–ß–Å–¢–û–í
============================================================
‚úÖ –û—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (v5): 1234 –∑–∞–ø–∏—Å–µ–π
‚úÖ –ü—Ä–æ–¥–∞–∂–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç—ã: 567 –∑–∞–ø–∏—Å–µ–π
‚úÖ –ó–∞–∫–∞–∑—ã: 890 –∑–∞–ø–∏—Å–µ–π
‚úÖ –û—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö: 234 –∑–∞–ø–∏—Å–µ–π
‚úÖ –ë–∞–ª–∞–Ω—Å –ø—Ä–æ–¥–∞–≤—Ü–∞: 1 –∑–∞–ø–∏—Å–µ–π
============================================================

‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã: output/wb_test_reports_20251118_223015.json

üéâ –ì–û–¢–û–í–û! –í—Å–µ –æ—Ç—á—ë—Ç—ã –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª:
   üìÑ output/wb_test_reports_20251118_223015.json
   üìè –†–∞–∑–º–µ—Ä: 324.5 KB
```

---

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Ç—á—ë—Ç—ã WB API

| –ö–ª—é—á | –û—Ç—á—ë—Ç | Endpoint |
|------|--------|----------|
| `reportDetail` | üìä **–ì–ª–∞–≤–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π (v5)** | `/api/v5/supplier/reportDetailByPeriod` |
| `sales` | üí∞ –ü—Ä–æ–¥–∞–∂–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç—ã | `/api/v1/supplier/sales` |
| `orders` | üì¶ –ó–∞–∫–∞–∑—ã | `/api/v1/supplier/orders` |
| `stocks` | üì¶ –û—Å—Ç–∞—Ç–∫–∏ | `/api/v1/supplier/stocks` |
| `incomes` | üöö –ü–æ—Å—Ç–∞–≤–∫–∏ | `/api/v1/supplier/incomes` |
| `antifraud` | üö´ –°–∞–º–æ–≤—ã–∫—É–ø—ã (30%) | `/api/v1/analytics/antifraud-details` |
| `penalties` | ‚ö†Ô∏è –ì–∞–±–∞—Ä–∏—Ç—ã/—à—Ç—Ä–∞—Ñ—ã | `/api/v1/analytics/warehouse-measurements` |
| `balance` | üí≥ –ë–∞–ª–∞–Ω—Å | `/api/v1/account/balance` |
| `region_sales` | üåç –ü–æ —Ä–µ–≥–∏–æ–Ω–∞–º | `/api/v1/analytics/region-sale` |
| `excise` | üè∑Ô∏è –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ | `/api/v1/analytics/excise-report` |

---

## üî• 3 –°–¢–†–û–ö–ò –ö–û–î–ê - –í–°–ï –û–¢–ß–Å–¢–´ WB

```python
from api.multi_report_loader import MultiReportLoader
from pathlib import Path

loader = MultiReportLoader(api_key="–≤–∞—à_–∫–ª—é—á")
results = loader.load_reports_sync(
    ["reportDetail", "sales", "orders", "stocks", "balance"],
    "2025-10-13T00:00:00Z", "2025-10-19T23:59:59Z"
)
loader.save_to_json(results, Path("wb_reports.json"))
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–¥–∏–Ω JSON —Å –≤—Å–µ–º–∏ –æ—Ç—á—ë—Ç–∞–º–∏ –∑–∞ 2-3 —Å–µ–∫—É–Ω–¥—ã! üöÄ

---

## üìä –û—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (v5) - –ì–õ–ê–í–ù–´–ô!

**–°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –æ—Ç—á—ë—Ç —Å–æ –í–°–ï–ú–ò —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**

```python
from api.wb_client import WBAPIClient

client = WBAPIClient(api_key="–≤–∞—à_–∫–ª—é—á")

# –ì–ª–∞–≤–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç
report = client.get_report_detail_by_period(
    date_from="2025-10-13",
    date_to="2025-10-19",
    limit=100000
)

print(f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ: {len(report)} –∑–∞–ø–∏—Å–µ–π")
```

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è –æ—Ç—á—ë—Ç–∞ v5:**
- `ppvz_for_pay` - –ö –≤—ã–ø–ª–∞—Ç–µ –ø—Ä–æ–¥–∞–≤—Ü—É
- `ppvz_sales_commission` - –ö–æ–º–∏—Å—Å–∏—è WB
- `delivery_rub` - –õ–æ–≥–∏—Å—Ç–∏–∫–∞
- `storage_fee` - –•—Ä–∞–Ω–µ–Ω–∏–µ
- `penalty` - –®—Ç—Ä–∞—Ñ—ã
- `acceptance` - –ü—Ä–∏—ë–º–∫–∞
- `additional_payment` - –î–æ–ø–ª–∞—Ç—ã

üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ:** [docs/WB_API_COMPLETE.md](docs/WB_API_COMPLETE.md)

---

## üíª –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –í—Å–µ –æ—Ç—á—ë—Ç—ã –∑–∞ –Ω–µ–¥–µ–ª—é

```python
from api.multi_report_loader import MultiReportLoader
from datetime import datetime, timedelta

loader = MultiReportLoader(api_key="–∫–ª—é—á")

date_to = datetime.now()
date_from = date_to - timedelta(days=7)

results = loader.load_reports_sync(
    report_keys=list(loader.ENDPOINTS.keys()),  # –≤—Å–µ!
    date_from=date_from.strftime("%Y-%m-%dT00:00:00Z"),
    date_to=date_to.strftime("%Y-%m-%dT23:59:59Z")
)

loader.print_summary(results)
```

### –ü—Ä–∏–º–µ—Ä 2: –¢–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ

```python
financial = ["reportDetail", "balance", "antifraud", "penalties"]
results = loader.load_reports_sync(
    financial, 
    "2025-10-01T00:00:00Z", 
    "2025-10-31T23:59:59Z"
)
```

### –ü—Ä–∏–º–µ—Ä 3: –°–∫–ª–∞–¥ –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞

```python
warehouse = ["stocks", "incomes", "orders"]
results = loader.load_reports_sync(
    warehouse,
    "2025-11-01T00:00:00Z"
)
```

---

## ‚ö° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–æ–±—ã—á–Ω—ã–π —Å–ø–æ—Å–æ–±):**
```
5 –æ—Ç—á—ë—Ç–æ–≤ √ó 2 —Å–µ–∫ = 10 —Å–µ–∫—É–Ω–¥ ‚è±Ô∏è
```

**–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ (MultiReportLoader):**
```
5 –æ—Ç—á—ë—Ç–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ = 2-3 —Å–µ–∫—É–Ω–¥—ã ‚ö°
```

**–£—Å–∫–æ—Ä–µ–Ω–∏–µ: 3-5x!** üöÄ

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ö–∞–∫–æ–π –æ—Ç—á—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏?

**–û—Ç–≤–µ—Ç:** `reportDetail` (v5) - —ç—Ç–æ **–≥–ª–∞–≤–Ω—ã–π –æ—Ç—á—ë—Ç** —Å –ø–æ–ª–Ω–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π:
- –ö–æ–º–∏—Å—Å–∏—è, –ª–æ–≥–∏—Å—Ç–∏–∫–∞, —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- –®—Ç—Ä–∞—Ñ—ã, –¥–æ–ø–ª–∞—Ç—ã, –ø—Ä–∏—ë–º–∫–∞
- –ö –≤—ã–ø–ª–∞—Ç–µ –ø—Ä–æ–¥–∞–≤—Ü—É
- –î–æ—Å—Ç—É–ø–µ–Ω —Å **29.01.2024**

### –ü–æ—á–µ–º—É –æ—à–∏–±–∫–∞ "Expecting value: line 1 column 1"?

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á (401)
2. ‚ùå –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –æ—Ç—á—ë—Ç (403)
3. ‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –ø–µ—Ä–∏–æ–¥ (–ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç)

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω—ã –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
- –ò–∑–º–µ–Ω–∏—Ç–µ –¥–∞—Ç—ã (–≤–æ–∑—å–º–∏—Ç–µ –±–æ–ª–µ–µ —Å–≤–µ–∂–∏–µ)

### –ö–∞–∫ –∑–∞–≥—Ä—É–∑–∏—Ç—å –±–æ–ª—å—à–æ–π –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö (>100000 –∑–∞–ø–∏—Å–µ–π)?

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é —á–µ—Ä–µ–∑ `rrdid`:**

```python
all_data = []
rrdid = 0

while True:
    batch = client.get_report_detail_by_period(
        date_from="2025-01-01",
        date_to="2025-12-31",
        limit=100000,
        rrdid=rrdid
    )
    
    if not batch:
        break
    
    all_data.extend(batch)
    rrdid = batch[-1]['rrd_id']  # ID –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–ø–∏—Å–∏
    
    print(f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ: {len(all_data)} –∑–∞–ø–∏—Å–µ–π...")
```

---

## üîó –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìö [WB API - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/WB_API_COMPLETE.md)
- üöÄ [Multi-Report Loader - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ](docs/MULTI_REPORT_LOADER.md)
- üìä [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è WB](https://dev.wildberries.ru/openapi/reports)
- üí∞ [–§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á—ë—Ç—ã](https://dev.wildberries.ru/openapi/financial-reports-and-accounting)

---

## ‚ú® –ß—Ç–æ –Ω–æ–≤–æ–≥–æ

### v2.0.0 (18.11.2025)
- ‚ûï **Multi-Report Loader** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –æ—Ç—á—ë—Ç–æ–≤
- ‚ûï **reportDetailByPeriod (v5)** - –≥–ª–∞–≤–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –æ—Ç—á—ë—Ç
- ‚ûï **get_account_balance** - —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å –ø—Ä–æ–¥–∞–≤—Ü–∞
- ‚ûï –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤—Å–µ—Ö endpoints
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ CLI